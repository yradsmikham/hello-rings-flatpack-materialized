---
# Source: hello-rings-featurea/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hello-rings-v1-featurea
  labels:
    name: hello-rings
    version: v1
    ring: featurea
spec:
  replicas: 1
  selector:
    matchLabels:
      name: hello-rings
      version: v1
      ring: featurea
  template:
    metadata:
      labels:
        name: hello-rings
        version: v1
        ring: featurea
    spec:
      containers:
        - name: hello-rings-featurea
          image: "hellorings.azurecr.io/hellorings:hello-rings-featurea-4177"
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 8080


---
# Source: hello-rings-featurea/templates/ring.yaml
apiVersion: rings.microsoft.com/v1alpha1
kind: Ring
metadata:
  name: hello-rings-v1-featurea
  author: Mike Developer # Set by pipeline
  branchName: my-branch # Set by pipeline
  buildId: 12345 # Set by pipeline
  buildDate: 20190601 # Set by pipeline
  commitId: abc123 # Set by pipeline
spec:
  # Deploy to environment
  deploy: true
  claim: featurea
  entryPoints:
    # Source of traffic (eg: 80 or 443)
    - http
    - https
    - internal
  match: PathPrefix(`/hello-rings/v1`) && Headers(`x-ring`, `featurea`)
  selector:
    name: hello-rings
    version: v1
    ring: featurea

